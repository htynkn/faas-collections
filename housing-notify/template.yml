ROSTemplateFormatVersion: '2015-09-01'
Transform: 'Aliyun::Serverless-2018-04-03'
Resources:
  faas-collections:
    Type: 'Aliyun::Serverless::Service'
    Properties:
      Description: 'send notification for new house info'
    housing-notify:
      Type: 'Aliyun::Serverless::Function'
      Properties:
        Handler: com.huangyunkun.faas.App::handleRequest
        Runtime: java8
        CodeUri: './target/housing-notify-1.0-SNAPSHOT-jar-with-dependencies.jar'
        MemorySize: 256
        Timeout: 10
        EnvironmentVariables:
          'DINGDING_TOKEN': 'env[DINGDING_TOKEN]'
      Events:
        TmTrigger:
          Type: Timer
          Properties:
            Payload: "timer"
            CronExpression: "0 0-12/4 * * *"
            Enable: true
